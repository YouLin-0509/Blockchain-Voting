# 區塊鏈投票系統

一個基於以太坊的去中心化投票系統，支援匿名投票和自動化管理。

## 功能特色

- 🔐 **匿名投票**: 使用環形簽名和零知識證明
- 🔄 **一鍵重新部署**: 輕鬆重置系統和數據
- 📊 **實時管理**: 動態合約地址管理
- 🌐 **網頁端操作**: 直接在瀏覽器中管理部署

## 快速開始

### 1. 安裝依賴
```bash
npm install
```

### 2. 啟動本地節點
```bash
npm run dev
```

### 3. 部署合約與前端
```bash
npm run deploy
cd frontend && npm start
```

## 系統操作

### 🔄 重新部署系統

#### 方法1：命令行重新部署
```bash
npm run deploy
```

#### 方法2：網頁端重新部署
1. 使用合約擁有者帳戶連接MetaMask
2. 在管理面板中點擊「🔄 一鍵重新部署」
3. 確認操作後等待部署完成
4. 頁面會自動刷新載入新配置

### 💡 為什麼需要重新部署？
- **數據重置**: 清除所有投票和註冊記錄
- **測試環境**: 為新的測試案例準備乾淨環境
- **合約更新**: 應用新的智能合約代碼
- **狀態管理**: 解決複雜的狀態衝突

## 配置管理

系統會自動管理配置文件：
- `frontend/src/config/contracts.js` - 自動更新的合約配置
- `frontend/public/deployment-status.json` - 部署狀態追蹤
- `deployments/` - 歷史部署記錄

## 使用流程

1. **連接錢包**: 使用MetaMask連接到localhost:8545
2. **選民註冊**: 一般用戶註冊為選民
3. **投票**: 選民選擇候選人並提交投票
4. **管理**: 合約擁有者管理投票流程和計票

## 技術架構

- **智能合約**: Solidity + Hardhat
- **前端**: React + Wagmi + Viem
- **區塊鏈**: 本地Hardhat網路
- **錢包**: MetaMask集成

## 注意事項

- 確保MetaMask已配置localhost:8545網路
- 合約擁有者地址會自動設定為Hardhat預設帳戶
- 重新部署會重置所有數據，請謹慎操作
- 網頁端重新部署需要後端API支援（開發中）

## 故障排除

### 合約地址錯誤
執行重新部署即可自動更新所有地址：
```bash
npm run deploy
```

### MetaMask連接問題
1. 檢查MetaMask網路設定
2. 確認localhost:8545可正常訪問
3. 重新載入頁面並重新連接錢包

### 前端配置問題
重新部署會自動重新生成配置文件，解決大部分配置問題。
